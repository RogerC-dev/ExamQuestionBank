/**
 * Global Dark Mode Override Styles
 * This file provides dark mode styling with high specificity
 * to override component-level scoped styles.
 */

/* Bootstrap 5 custom color mode tokens */
:root {
  color-scheme: light;
  --bs-body-bg: var(--bg-page);
  --bs-body-bg-rgb: 248, 250, 252;
  --bs-body-color: var(--text-primary);
  --bs-body-color-rgb: 30, 41, 59;
  --bs-secondary-color: var(--text-secondary);
  --bs-secondary-color-rgb: 100, 116, 139;
  --bs-secondary-bg: var(--surface);
  --bs-secondary-bg-rgb: 255, 255, 255;
  --bs-tertiary-bg: var(--surface-muted);
  --bs-tertiary-bg-rgb: 226, 232, 240;
  --bs-border-color: var(--border);
  --bs-border-color-rgb: 203, 213, 225;
  --bs-card-bg: var(--surface);
  --bs-card-border-color: var(--border);
  --bs-modal-bg: var(--surface);
  --bs-dropdown-bg: var(--surface);
  --bs-link-color: var(--primary);
  --bs-link-hover-color: var(--primary-hover);
  --bs-primary: var(--primary);
  --bs-primary-rgb: 71, 105, 150;
  --bs-success: var(--success);
  --bs-success-rgb: 34, 197, 94;
  --bs-warning: var(--warning);
  --bs-warning-rgb: 245, 158, 11;
  --bs-danger: var(--destructive);
  --bs-danger-rgb: 239, 68, 68;
}

:root[data-bs-theme="dark"] {
  color-scheme: dark;
  --bs-body-bg: var(--bg-page);
  --bs-body-bg-rgb: 15, 23, 42;
  --bs-body-color: var(--text-primary);
  --bs-body-color-rgb: 241, 245, 249;
  --bs-secondary-color: var(--text-secondary);
  --bs-secondary-color-rgb: 148, 163, 184;
  --bs-secondary-bg: var(--surface);
  --bs-secondary-bg-rgb: 30, 41, 59;
  --bs-tertiary-bg: var(--surface-muted);
  --bs-tertiary-bg-rgb: 51, 65, 85;
  --bs-border-color: var(--border);
  --bs-border-color-rgb: 51, 65, 85;
  --bs-card-bg: var(--surface);
  --bs-card-border-color: var(--border);
  --bs-modal-bg: var(--surface);
  --bs-dropdown-bg: var(--surface);
  --bs-link-color: var(--primary);
  --bs-link-hover-color: var(--primary-hover);
  --bs-primary: var(--primary);
  --bs-primary-rgb: 96, 165, 250;
  --bs-success: var(--success);
  --bs-success-rgb: 74, 222, 128;
  --bs-warning: var(--warning);
  --bs-warning-rgb: 251, 191, 36;
  --bs-danger: var(--destructive);
  --bs-danger-rgb: 248, 113, 113;
}
/* Aggressive dark mode overrides with html:is(.dark, [data-bs-theme="dark"]) for maximum specificity */

/* All white backgrounds ??dark surface */
html:is(.dark, [data-bs-theme="dark"]) .admin-data-list,
html:is(.dark, [data-bs-theme="dark"]) .list-item,
html:is(.dark, [data-bs-theme="dark"]) .exam-card,
html:is(.dark, [data-bs-theme="dark"]) .question-card,
html:is(.dark, [data-bs-theme="dark"]) .mode-card,
html:is(.dark, [data-bs-theme="dark"]) .feature-card,
html:is(.dark, [data-bs-theme="dark"]) .benefit-card,
html:is(.dark, [data-bs-theme="dark"]) .pricing-card,
html:is(.dark, [data-bs-theme="dark"]) .analytics-card,
html:is(.dark, [data-bs-theme="dark"]) .overview-card,
html:is(.dark, [data-bs-theme="dark"]) .stat-card,
html:is(.dark, [data-bs-theme="dark"]) .trend-card,
html:is(.dark, [data-bs-theme="dark"]) .results-card,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card,
html:is(.dark, [data-bs-theme="dark"]) .chart-card,
html:is(.dark, [data-bs-theme="dark"]) .flashcard-item,
html:is(.dark, [data-bs-theme="dark"]) .feature-box,
html:is(.dark, [data-bs-theme="dark"]) .exam-list-section,
html:is(.dark, [data-bs-theme="dark"]) .filters-section,
html:is(.dark, [data-bs-theme="dark"]) .questions-section,
html:is(.dark, [data-bs-theme="dark"]) .exam-config-section,
html:is(.dark, [data-bs-theme="dark"]) .sidebar,
html:is(.dark, [data-bs-theme="dark"]) .input-container {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Cards with featured/white forced state */
html:is(.dark, [data-bs-theme="dark"]) .pricing-card.featured {
  background: var(--surface) !important;
  border-color: var(--primary) !important;
}

/* Hover states */
html:is(.dark, [data-bs-theme="dark"]) .list-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .question-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .mode-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .feature-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .benefit-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .feature-box:hover {
  background: var(--surface-muted) !important;
}

/* Selected states */
html:is(.dark, [data-bs-theme="dark"]) .list-item.selected,
html:is(.dark, [data-bs-theme="dark"]) .question-card.selected {
  background: var(--primary-soft) !important;
}

/* Form inputs and selects */
html:is(.dark, [data-bs-theme="dark"]) input:not([type="checkbox"]):not([type="radio"]),
html:is(.dark, [data-bs-theme="dark"]) select,
html:is(.dark, [data-bs-theme="dark"]) textarea {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) input::placeholder,
html:is(.dark, [data-bs-theme="dark"]) textarea::placeholder {
  color: var(--text-secondary) !important;
}

/* Tabs and navigation with background */
html:is(.dark, [data-bs-theme="dark"]) .admin-tabs,
html:is(.dark, [data-bs-theme="dark"]) .tabs-container,
html:is(.dark, [data-bs-theme="dark"]) .subject-tabs {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .tab-btn.active {
  background: var(--surface) !important;
  color: var(--primary) !important;
}

/* Headers and bars with background */
html:is(.dark, [data-bs-theme="dark"]) .list-header,
html:is(.dark, [data-bs-theme="dark"]) .select-all-bar,
html:is(.dark, [data-bs-theme="dark"]) .filter-bar,
html:is(.dark, [data-bs-theme="dark"]) .search-filter {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Badges with light bg */
html:is(.dark, [data-bs-theme="dark"]) .badge-type,
html:is(.dark, [data-bs-theme="dark"]) .tag-more,
html:is(.dark, [data-bs-theme="dark"]) .id-badge,
html:is(.dark, [data-bs-theme="dark"]) .stat-item {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
  border-color: var(--border) !important;
}

/* Button secondary */
html:is(.dark, [data-bs-theme="dark"]) .btn-secondary,
html:is(.dark, [data-bs-theme="dark"]) .action-btn-secondary {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
}

/* Modals and dialogs */
html:is(.dark, [data-bs-theme="dark"]) .modal-content,
html:is(.dark, [data-bs-theme="dark"]) .dialog-body,
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-dialog {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Extension section with hardcoded #f8fafc */
html:is(.dark, [data-bs-theme="dark"]) .extension-section {
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .extension-demo {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Pricing features list items */
html:is(.dark, [data-bs-theme="dark"]) .pricing-features li {
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Stats section */
html:is(.dark, [data-bs-theme="dark"]) .stats-section {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Integration/Features sections */
html:is(.dark, [data-bs-theme="dark"]) .features-section,
html:is(.dark, [data-bs-theme="dark"]) .integration-section {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Pricing section bg */
html:is(.dark, [data-bs-theme="dark"]) .pricing-section {
  background: var(--bg-page) !important;
}

/* QuestionList specific rows  */
html:is(.dark, [data-bs-theme="dark"]) .question-list-container,
html:is(.dark, [data-bs-theme="dark"]) .question-list-item,
html:is(.dark, [data-bs-theme="dark"]) .filter-section,
html:is(.dark, [data-bs-theme="dark"]) .search-box {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Quiz mode elements */
html:is(.dark, [data-bs-theme="dark"]) .quiz-container,
html:is(.dark, [data-bs-theme="dark"]) .quiz-question-card,
html:is(.dark, [data-bs-theme="dark"]) .quiz-header,
html:is(.dark, [data-bs-theme="dark"]) .option-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .option-card:hover {
  background: var(--surface-muted) !important;
  border-color: var(--primary) !important;
}

/* Chart containers may have white bg */
html:is(.dark, [data-bs-theme="dark"]) .heatmap-card,
html:is(.dark, [data-bs-theme="dark"]) .chart-card {
  background: var(--surface) !important;
}

/* Error banners */
html:is(.dark, [data-bs-theme="dark"]) .error-banner,
html:is(.dark, [data-bs-theme="dark"]) .error-message,
html:is(.dark, [data-bs-theme="dark"]) .alert-danger {
  background: var(--destructive-soft) !important;
  border-color: var(--destructive) !important;
  color: var(--destructive) !important;
}

/* Pagination */
html:is(.dark, [data-bs-theme="dark"]) .pagination-controls,
html:is(.dark, [data-bs-theme="dark"]) .pagination-container {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-page {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Results table rows */
html:is(.dark, [data-bs-theme="dark"]) .results-table-row,
html:is(.dark, [data-bs-theme="dark"]) .trend-item,
html:is(.dark, [data-bs-theme="dark"]) .hot-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .results-table-row:hover,
html:is(.dark, [data-bs-theme="dark"]) .trend-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover {
  background: var(--surface-muted) !important;
}

/* Table headers */
html:is(.dark, [data-bs-theme="dark"]) .results-table-header,
html:is(.dark, [data-bs-theme="dark"]) .trend-list-header {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Review header in flashcard */
html:is(.dark, [data-bs-theme="dark"]) .review-header {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Rating buttons */
html:is(.dark, [data-bs-theme="dark"]) .rating-btn {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .rating-btn:hover {
  background: var(--primary-soft) !important;
  border-color: var(--primary) !important;
}

/* History items */
html:is(.dark, [data-bs-theme="dark"]) .history-item:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-item.active {
  background: var(--primary-soft) !important;
}

/* Message input container */
html:is(.dark, [data-bs-theme="dark"]) .input-container:focus-within {
  border-color: var(--primary) !important;
}

/* Exam card footer border */
html:is(.dark, [data-bs-theme="dark"]) .exam-card-footer,
html:is(.dark, [data-bs-theme="dark"]) .filter-actions,
html:is(.dark, [data-bs-theme="dark"]) .dialog-footer {
  border-color: var(--border) !important;
}

/* Tags */
html:is(.dark, [data-bs-theme="dark"]) .tag-badge {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

/* Subject badge */
html:is(.dark, [data-bs-theme="dark"]) .meta-badge {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
}

/* Dropdown menus */
html:is(.dark, [data-bs-theme="dark"]) .dropdown-menu {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Empty states */
html:is(.dark, [data-bs-theme="dark"]) .empty-state,
html:is(.dark, [data-bs-theme="dark"]) .empty-chart,
html:is(.dark, [data-bs-theme="dark"]) .empty-results {
  background: var(--surface) !important;
  color: var(--text-secondary) !important;
}

/* ===== ADDITIONAL FIXES FOR REMAINING WHITE ELEMENTS ===== */

/* Admin exam filters */
html:is(.dark, [data-bs-theme="dark"]) .exam-filters,
html:is(.dark, [data-bs-theme="dark"]) .filter-group,
html:is(.dark, [data-bs-theme="dark"]) .filter-row,
html:is(.dark, [data-bs-theme="dark"]) .filter-wrapper,
html:is(.dark, [data-bs-theme="dark"]) .filters-container {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Practice page question list */
html:is(.dark, [data-bs-theme="dark"]) .question-item,
html:is(.dark, [data-bs-theme="dark"]) .practice-question-item,
html:is(.dark, [data-bs-theme="dark"]) .question-row,
html:is(.dark, [data-bs-theme="dark"]) .practice-list,
html:is(.dark, [data-bs-theme="dark"]) .practice-list-container {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .practice-question-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .question-row:hover {
  background: var(--surface-muted) !important;
}

/* Exam preview question cards (?? ?? etc) */
html:is(.dark, [data-bs-theme="dark"]) .exam-question-item,
html:is(.dark, [data-bs-theme="dark"]) .exam-question-card,
html:is(.dark, [data-bs-theme="dark"]) .question-preview-card,
html:is(.dark, [data-bs-theme="dark"]) .preview-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-question-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-question-card:hover {
  background: var(--surface-muted) !important;
}

/* Exam preview container/header */
html:is(.dark, [data-bs-theme="dark"]) .exam-preview-container,
html:is(.dark, [data-bs-theme="dark"]) .exam-preview-header,
html:is(.dark, [data-bs-theme="dark"]) .exam-info-card,
html:is(.dark, [data-bs-theme="dark"]) .exam-header-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Quiz mode - Navigation sidebar */
html:is(.dark, [data-bs-theme="dark"]) .quiz-navigation,
html:is(.dark, [data-bs-theme="dark"]) .quiz-nav,
html:is(.dark, [data-bs-theme="dark"]) .question-nav,
html:is(.dark, [data-bs-theme="dark"]) .question-navigation,
html:is(.dark, [data-bs-theme="dark"]) .nav-sidebar,
html:is(.dark, [data-bs-theme="dark"]) .navigation-panel {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Quiz mode - Answer options */
html:is(.dark, [data-bs-theme="dark"]) .option-item,
html:is(.dark, [data-bs-theme="dark"]) .answer-option,
html:is(.dark, [data-bs-theme="dark"]) .quiz-option,
html:is(.dark, [data-bs-theme="dark"]) .choice-item,
html:is(.dark, [data-bs-theme="dark"]) .answer-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .option-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .answer-option:hover,
html:is(.dark, [data-bs-theme="dark"]) .quiz-option:hover,
html:is(.dark, [data-bs-theme="dark"]) .choice-item:hover {
  background: var(--surface-muted) !important;
  border-color: var(--primary) !important;
}

/* Quiz mode - Question card and content area */
html:is(.dark, [data-bs-theme="dark"]) .question-content-area,
html:is(.dark, [data-bs-theme="dark"]) .quiz-main,
html:is(.dark, [data-bs-theme="dark"]) .quiz-content,
html:is(.dark, [data-bs-theme="dark"]) .question-display,
html:is(.dark, [data-bs-theme="dark"]) .quiz-question-container {
  background: var(--surface) !important;
}

/* Analytics - Stat cards with white backgrounds */
html:is(.dark, [data-bs-theme="dark"]) .stat-box,
html:is(.dark, [data-bs-theme="dark"]) .stat-container,
html:is(.dark, [data-bs-theme="dark"]) .overview-stat,
html:is(.dark, [data-bs-theme="dark"]) .metric-card,
html:is(.dark, [data-bs-theme="dark"]) .data-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Analytics - Chart containers and graphs */
html:is(.dark, [data-bs-theme="dark"]) .chart-container,
html:is(.dark, [data-bs-theme="dark"]) .graph-container,
html:is(.dark, [data-bs-theme="dark"]) .heatmap-container,
html:is(.dark, [data-bs-theme="dark"]) .chart-wrapper,
html:is(.dark, [data-bs-theme="dark"]) .chart-area {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Analytics - Learning activity section */
html:is(.dark, [data-bs-theme="dark"]) .activity-card,
html:is(.dark, [data-bs-theme="dark"]) .learning-activity,
html:is(.dark, [data-bs-theme="dark"]) .activity-section {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* AI Essay Analysis - Feature boxes with icons */
html:is(.dark, [data-bs-theme="dark"]) .analysis-feature,
html:is(.dark, [data-bs-theme="dark"]) .essay-feature,
html:is(.dark, [data-bs-theme="dark"]) .feature-item,
html:is(.dark, [data-bs-theme="dark"]) .welcome-feature {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .analysis-feature:hover,
html:is(.dark, [data-bs-theme="dark"]) .essay-feature:hover,
html:is(.dark, [data-bs-theme="dark"]) .feature-item:hover {
  background: var(--surface-muted) !important;
}

/* Filter input areas */
html:is(.dark, [data-bs-theme="dark"]) .filter-input-wrapper,
html:is(.dark, [data-bs-theme="dark"]) .search-wrapper,
html:is(.dark, [data-bs-theme="dark"]) .input-group {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Tab button group backgrounds */
html:is(.dark, [data-bs-theme="dark"]) .tab-group,
html:is(.dark, [data-bs-theme="dark"]) .tabs-wrapper,
html:is(.dark, [data-bs-theme="dark"]) .nav-tabs {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Practice mode cards (with gradient icons) */
html:is(.dark, [data-bs-theme="dark"]) .historical-card,
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-card,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card,
html:is(.dark, [data-bs-theme="dark"]) .bookmark-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Select dropdowns */
html:is(.dark, [data-bs-theme="dark"]) .tag-select,
html:is(.dark, [data-bs-theme="dark"]) .filter-select,
html:is(.dark, [data-bs-theme="dark"]) .dropdown-select {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Pagination bar at bottom */
html:is(.dark, [data-bs-theme="dark"]) .pagination-bar,
html:is(.dark, [data-bs-theme="dark"]) .page-controls,
html:is(.dark, [data-bs-theme="dark"]) .pager {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .page-btn,
html:is(.dark, [data-bs-theme="dark"]) .page-link,
html:is(.dark, [data-bs-theme="dark"]) .page-number {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .page-btn.active,
html:is(.dark, [data-bs-theme="dark"]) .page-link.active,
html:is(.dark, [data-bs-theme="dark"]) .page-number.active {
  background: var(--primary) !important;
  color: #fff !important;
}

/* Question badges and tags styling */
html:is(.dark, [data-bs-theme="dark"]) .question-badge,
html:is(.dark, [data-bs-theme="dark"]) .difficulty-badge,
html:is(.dark, [data-bs-theme="dark"]) .subject-badge,
html:is(.dark, [data-bs-theme="dark"]) .year-badge {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Toolbar and action bars */
html:is(.dark, [data-bs-theme="dark"]) .toolbar,
html:is(.dark, [data-bs-theme="dark"]) .action-bar,
html:is(.dark, [data-bs-theme="dark"]) .control-bar {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Card bodies and content sections */
html:is(.dark, [data-bs-theme="dark"]) .card-body,
html:is(.dark, [data-bs-theme="dark"]) .card-content,
html:is(.dark, [data-bs-theme="dark"]) .panel-body {
  background: var(--surface) !important;
}

/* Exam list containers in various views */
html:is(.dark, [data-bs-theme="dark"]) .exam-list,
html:is(.dark, [data-bs-theme="dark"]) .exams-container,
html:is(.dark, [data-bs-theme="dark"]) .exam-grid-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Select all bar in lists */
html:is(.dark, [data-bs-theme="dark"]) .select-all-container,
html:is(.dark, [data-bs-theme="dark"]) .bulk-actions {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Progress bars container */
html:is(.dark, [data-bs-theme="dark"]) .progress-container,
html:is(.dark, [data-bs-theme="dark"]) .progress-wrapper {
  background: var(--surface-muted) !important;
}

/* ===== EXACT CLASS NAMES FROM SOURCE CODE ===== */

/* QuestionPracticeView - Quiz mode container */
html:is(.dark, [data-bs-theme="dark"]) .split-view-container,
html:is(.dark, [data-bs-theme="dark"]) .main-panel,
html:is(.dark, [data-bs-theme="dark"]) .quiz-content,
html:is(.dark, [data-bs-theme="dark"]) .quiz-header,
html:is(.dark, [data-bs-theme="dark"]) .quiz-info,
html:is(.dark, [data-bs-theme="dark"]) .quiz-tools,
html:is(.dark, [data-bs-theme="dark"]) .navigation-section,
html:is(.dark, [data-bs-theme="dark"]) .question-panel,
html:is(.dark, [data-bs-theme="dark"]) .options-list {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* QuestionPracticeView - Question navigator buttons */
html:is(.dark, [data-bs-theme="dark"]) .question-navigator {
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .nav-btn {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .nav-btn.current {
  background: var(--primary) !important;
  color: #fff !important;
}

html:is(.dark, [data-bs-theme="dark"]) .nav-btn.answered {
  background: var(--success-soft) !important;
  border-color: var(--success) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .nav-btn.wrong {
  background: var(--destructive-soft) !important;
  border-color: var(--destructive) !important;
}

/* ExamPreviewView - Question cards (?? ?? */
html:is(.dark, [data-bs-theme="dark"]) .exam-preview-container,
html:is(.dark, [data-bs-theme="dark"]) .exam-preview,
html:is(.dark, [data-bs-theme="dark"]) .question-list,
html:is(.dark, [data-bs-theme="dark"]) .question-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-card:hover {
  background: var(--surface-muted) !important;
}

/* ExamPreviewView - Testing interface (quiz mode sidebar) */
html:is(.dark, [data-bs-theme="dark"]) .testing-interface,
html:is(.dark, [data-bs-theme="dark"]) .testing-header,
html:is(.dark, [data-bs-theme="dark"]) .testing-content,
html:is(.dark, [data-bs-theme="dark"]) .testing-sidebar,
html:is(.dark, [data-bs-theme="dark"]) .testing-main,
html:is(.dark, [data-bs-theme="dark"]) .results-panel {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* EssayAnalysisView - Feature boxes explicitly */
html:is(.dark, [data-bs-theme="dark"]) .welcome-section,
html:is(.dark, [data-bs-theme="dark"]) .feature-grid,
html:is(.dark, [data-bs-theme="dark"]) .feature-box {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* AnalyticsView - All card types explicitly */
html:is(.dark, [data-bs-theme="dark"]) .overview-card,
html:is(.dark, [data-bs-theme="dark"]) .analytics-card,
html:is(.dark, [data-bs-theme="dark"]) .heatmap-card,
html:is(.dark, [data-bs-theme="dark"]) .trend-card,
html:is(.dark, [data-bs-theme="dark"]) .results-card,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Admin filters explicitly */
html:is(.dark, [data-bs-theme="dark"]) .exam-filters {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .filter-search,
html:is(.dark, [data-bs-theme="dark"]) .filter-select-wrapper,
html:is(.dark, [data-bs-theme="dark"]) .filter-btn {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Progress bar container */
html:is(.dark, [data-bs-theme="dark"]) .progress-bar-container {
  background: var(--surface-muted) !important;
}

/* Answer record section */
html:is(.dark, [data-bs-theme="dark"]) .answer-record {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Arrow buttons in navigation */
html:is(.dark, [data-bs-theme="dark"]) .arrow-btn {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .arrow-btn:hover:not(:disabled) {
  background: var(--primary-soft) !important;
  border-color: var(--primary) !important;
}

/* Meta tags */
html:is(.dark, [data-bs-theme="dark"]) .meta-tag {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

/* Question content area */
html:is(.dark, [data-bs-theme="dark"]) .question-content {
  background: var(--surface) !important;
  color: var(--text-primary) !important;
}

/* ===== FINAL FIXES FOR REMAINING WHITE ELEMENTS ===== */

/* Timer Component */
html:is(.dark, [data-bs-theme="dark"]) .timer-component {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .timer-label,
html:is(.dark, [data-bs-theme="dark"]) .timer-value {
  color: var(--text-primary) !important;
}

/* Pagination wrapper and items (Bootstrap pagination) */
html:is(.dark, [data-bs-theme="dark"]) .pagination-wrapper {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .pagination-info,
html:is(.dark, [data-bs-theme="dark"]) .page-jumper {
  background: var(--surface) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .pagination .page-link {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .pagination .page-item.active .page-link {
  background: var(--primary) !important;
  border-color: var(--primary) !important;
  color: #fff !important;
}

html:is(.dark, [data-bs-theme="dark"]) .pagination .page-link:hover:not(.disabled) {
  background: var(--primary-soft) !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .page-size-select {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Heatmap grid and cells */
html:is(.dark, [data-bs-theme="dark"]) .heatmap-header,
html:is(.dark, [data-bs-theme="dark"]) .heatmap-container,
html:is(.dark, [data-bs-theme="dark"]) .heatmap-grid {
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .heatmap-cell[style*="background: white"],
html:is(.dark, [data-bs-theme="dark"]) .heatmap-cell[style*="background: #fff"],
html:is(.dark, [data-bs-theme="dark"]) .heatmap-cell {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .heatmap-tooltip {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Exam header and info section */
html:is(.dark, [data-bs-theme="dark"]) .exam-header,
html:is(.dark, [data-bs-theme="dark"]) .exam-info,
html:is(.dark, [data-bs-theme="dark"]) .exam-title,
html:is(.dark, [data-bs-theme="dark"]) .exam-details {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Subject tags in quiz mode */
html:is(.dark, [data-bs-theme="dark"]) .subject-tag,
html:is(.dark, [data-bs-theme="dark"]) .category-tag,
html:is(.dark, [data-bs-theme="dark"]) .topic-tag,
html:is(.dark, [data-bs-theme="dark"]) [class*="-tag"]:not(.tag-badge) {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-secondary) !important;
}

/* Question number badge */
html:is(.dark, [data-bs-theme="dark"]) .question-number,
html:is(.dark, [data-bs-theme="dark"]) .question-order {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

/* Points badge in exam */
html:is(.dark, [data-bs-theme="dark"]) .points,
html:is(.dark, [data-bs-theme="dark"]) .points-badge {
  background: var(--success-soft) !important;
  color: var(--success) !important;
}

/* Quiz actions buttons container */
html:is(.dark, [data-bs-theme="dark"]) .quiz-actions {
  background: var(--surface) !important;
}

/* Quiz question display title and badge area */
html:is(.dark, [data-bs-theme="dark"]) .question-header h2,
html:is(.dark, [data-bs-theme="dark"]) .question-title {
  color: var(--text-primary) !important;
}

/* Form select dropdowns (Bootstrap) */
html:is(.dark, [data-bs-theme="dark"]) .form-select {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-control {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* General buttons that might have white bg */
html:is(.dark, [data-bs-theme="dark"]) .btn-outline-primary,
html:is(.dark, [data-bs-theme="dark"]) .btn-outline-secondary {
  background: transparent !important;
  color: var(--primary) !important;
}

/* ===== USER REQUESTED FIXES - [2026-01-02] ===== */

/* 1. Question List & Search Results */
html:is(.dark, [data-bs-theme="dark"]) .search-question-item,
html:is(.dark, [data-bs-theme="dark"]) .question-list-item,
html:is(.dark, [data-bs-theme="dark"]) .search-result-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-question-badges .badge,
html:is(.dark, [data-bs-theme="dark"]) .item-badges .badge {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
  border: 1px solid var(--border) !important;
}

/* 2. AI Chat Interface (Split View & Mobile) */
html:is(.dark, [data-bs-theme="dark"]) .ai-chat-interface,
html:is(.dark, [data-bs-theme="dark"]) .chat-panel,
html:is(.dark, [data-bs-theme="dark"]) .chat-panel-split,
html:is(.dark, [data-bs-theme="dark"]) .chat-tabs,
html:is(.dark, [data-bs-theme="dark"]) .chat-messages,
html:is(.dark, [data-bs-theme="dark"]) .history-panel,
html:is(.dark, [data-bs-theme="dark"]) .chat-input-container {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .message.assistant .message-content {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .chat-input {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-item {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-reuse,
html:is(.dark, [data-bs-theme="dark"]) .history-edit {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .chat-tabs button {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .chat-tabs button.active {
  background: var(--surface-muted) !important;
  color: var(--primary) !important;
}

/* 3. Start Exam / Practice Mode */
html:is(.dark, [data-bs-theme="dark"]) .question-header,
html:is(.dark, [data-bs-theme="dark"]) .question-meta,
html:is(.dark, [data-bs-theme="dark"]) .progress-tracker,
html:is(.dark, [data-bs-theme="dark"]) .quiz-header {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .quiz-panel,
html:is(.dark, [data-bs-theme="dark"]) .quiz-question {
  background: var(--surface) !important;
}

/* 4. Exam Edit View */
html:is(.dark, [data-bs-theme="dark"]) .exam-edit-view,
html:is(.dark, [data-bs-theme="dark"]) .content-container,
html:is(.dark, [data-bs-theme="dark"]) .exam-form-container {
  background: var(--bg-page) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .saving-modal,
html:is(.dark, [data-bs-theme="dark"]) .auto-distribute-modal {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* 5. Mock Exam & Count Options */
html:is(.dark, [data-bs-theme="dark"]) .count-options .count-btn {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .count-options .count-btn.active {
  background: var(--primary) !important;
  color: #fff !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .source-checkbox {
  color: var(--text-primary) !important;
}

/* 6. Analytics Header */
html:is(.dark, [data-bs-theme="dark"]) .analytics-header,
html:is(.dark, [data-bs-theme="dark"]) .page-header,
html:is(.dark, [data-bs-theme="dark"]) .section-header {
  color: var(--text-primary) !important;
}

/* 7. Mode Cards (Specific) */
html:is(.dark, [data-bs-theme="dark"]) .mode-card.mock-exam-card,
html:is(.dark, [data-bs-theme="dark"]) .mode-card.historical-card,
html:is(.dark, [data-bs-theme="dark"]) .mode-card.wrong-card,
html:is(.dark, [data-bs-theme="dark"]) .mode-card.bookmark-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .mode-card:hover {
  background: var(--surface-muted) !important;
}

/* 8. Multiselect (Vue Multiselect) */
html:is(.dark, [data-bs-theme="dark"]) .multiselect__tags {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .multiselect__input,
html:is(.dark, [data-bs-theme="dark"]) .multiselect__single {
  background: transparent !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .multiselect__content-wrapper {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .multiselect__option {
  color: var(--text-primary) !important;
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .multiselect__option--highlight {
  background: var(--primary) !important;
  color: #fff !important;
}

html:is(.dark, [data-bs-theme="dark"]) .multiselect__tag {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

/* 9. General Buttons & Inputs Fixes */
html:is(.dark, [data-bs-theme="dark"]) .btn-light,
html:is(.dark, [data-bs-theme="dark"]) .btn-white {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
  border-color: var(--border) !important;
}

/* Fix "cant even read the words in dark mode when the fonts greyish" */
html:is(.dark, [data-bs-theme="dark"]) .text-muted,
html:is(.dark, [data-bs-theme="dark"]) .text-secondary {
  color: #94a3b8 !important;
  /* Make sure it's readable on dark bg */
}

/* Fix for "search-question-badges" specifically */
html:is(.dark, [data-bs-theme="dark"]) .search-question-badges span {
  background: var(--surface-muted) !important;
  border: 1px solid var(--border) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-outline-primary:hover,
html:is(.dark, [data-bs-theme="dark"]) .btn-outline-secondary:hover {
  background: var(--primary) !important;
  color: #fff !important;
}

/* Fix any remaining Bootstrap card body */
html:is(.dark, [data-bs-theme="dark"]) .card,
html:is(.dark, [data-bs-theme="dark"]) .card-header,
html:is(.dark, [data-bs-theme="dark"]) .card-body,
html:is(.dark, [data-bs-theme="dark"]) .card-footer {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Loading spinner containers */
html:is(.dark, [data-bs-theme="dark"]) .loading-state {
  background: var(--surface) !important;
  color: var(--text-secondary) !important;
}

/* Quiz message alerts */
html:is(.dark, [data-bs-theme="dark"]) .quiz-message {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* ===== CRITICAL TEXT COLOR FIXES FOR QUIZ MODE ===== */

/* Question text content - override hardcoded #1e293b */
html:is(.dark, [data-bs-theme="dark"]) .question-content,
html:is(.dark, [data-bs-theme="dark"]) .question-content p,
html:is(.dark, [data-bs-theme="dark"]) .question-content span,
html:is(.dark, [data-bs-theme="dark"]) .question-text,
html:is(.dark, [data-bs-theme="dark"]) .quiz-content p,
html:is(.dark, [data-bs-theme="dark"]) .question-panel p,
html:is(.dark, [data-bs-theme="dark"]) .question-panel span,
html:is(.dark, [data-bs-theme="dark"]) .main-panel p,
html:is(.dark, [data-bs-theme="dark"]) .split-view-container p {
  color: var(--text-primary) !important;
}

/* Answer options - ensure readable text */
html:is(.dark, [data-bs-theme="dark"]) .option-item,
html:is(.dark, [data-bs-theme="dark"]) .option-text,
html:is(.dark, [data-bs-theme="dark"]) .option-label,
html:is(.dark, [data-bs-theme="dark"]) .option-content {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .option-item:hover {
  background: var(--surface-muted) !important;
}

/* Quiz header text */
html:is(.dark, [data-bs-theme="dark"]) .quiz-title,
html:is(.dark, [data-bs-theme="dark"]) .quiz-progress,
html:is(.dark, [data-bs-theme="dark"]) .quiz-info span,
html:is(.dark, [data-bs-theme="dark"]) .quiz-header span {
  color: var(--text-primary) !important;
}

/* Navigation buttons - override white background */
html:is(.dark, [data-bs-theme="dark"]) .nav-btn:not(.current):not(.answered):not(.wrong) {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* Back button */
html:is(.dark, [data-bs-theme="dark"]) .btn-back {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-back:hover {
  background: var(--surface-muted) !important;
}

/* Answer record section */
html:is(.dark, [data-bs-theme="dark"]) .record-label {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .record-stat {
  color: var(--text-primary) !important;
}

/* Meta tags in question panel */
html:is(.dark, [data-bs-theme="dark"]) .meta-tag.subject,
html:is(.dark, [data-bs-theme="dark"]) .meta-tag.category,
html:is(.dark, [data-bs-theme="dark"]) .meta-tag.difficulty {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

/* Arrow navigation buttons */
html:is(.dark, [data-bs-theme="dark"]) .arrow-btn.prev,
html:is(.dark, [data-bs-theme="dark"]) .arrow-btn.next {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
}

/* Heatmap cells - fix white empty cells */
html:is(.dark, [data-bs-theme="dark"]) .heatmap-cell,
html:is(.dark, [data-bs-theme="dark"]) .heatmap-day {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Active heatmap cells should keep their color gradients but with darker empty state */
html:is(.dark, [data-bs-theme="dark"]) .heatmap-cell[style*="0"] {
  background: var(--surface) !important;
}

/* Time range buttons in analytics */
html:is(.dark, [data-bs-theme="dark"]) .time-range-btn,
html:is(.dark, [data-bs-theme="dark"]) .range-btn {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .time-range-btn.active,
html:is(.dark, [data-bs-theme="dark"]) .range-btn.active {
  background: var(--primary) !important;
  color: #fff !important;
}

/* AI Essay Analysis - remove glow */
html:is(.dark, [data-bs-theme="dark"]) .welcome-content,
html:is(.dark, [data-bs-theme="dark"]) .essay-container {
  box-shadow: none !important;
}

/* Exam preview title card */
html:is(.dark, [data-bs-theme="dark"]) .exam-preview-header,
html:is(.dark, [data-bs-theme="dark"]) .preview-header,
html:is(.dark, [data-bs-theme="dark"]) .exam-title-card {
  background: var(--surface) !important;
  color: var(--text-primary) !important;
}

/* Question card content text in exam preview */
html:is(.dark, [data-bs-theme="dark"]) .question-card p,
html:is(.dark, [data-bs-theme="dark"]) .question-card .content,
html:is(.dark, [data-bs-theme="dark"]) .question-card span {
  color: var(--text-primary) !important;
}

/* Order badge text */
html:is(.dark, [data-bs-theme="dark"]) .order,
html:is(.dark, [data-bs-theme="dark"]) .question-order span {
  color: var(--text-secondary) !important;
}

/* General text readability across all views */
html:is(.dark, [data-bs-theme="dark"]) p,
html:is(.dark, [data-bs-theme="dark"]) span:not([class*="icon"]):not([class*="bi-"]),
html:is(.dark, [data-bs-theme="dark"]) label,
html:is(.dark, [data-bs-theme="dark"]) h1,
html:is(.dark, [data-bs-theme="dark"]) h2,
html:is(.dark, [data-bs-theme="dark"]) h3,
html:is(.dark, [data-bs-theme="dark"]) h4,
html:is(.dark, [data-bs-theme="dark"]) h5,
html:is(.dark, [data-bs-theme="dark"]) h6 {
  color: var(--text-primary);
}

/* Muted text should use secondary color */
html:is(.dark, [data-bs-theme="dark"]) .text-muted,
html:is(.dark, [data-bs-theme="dark"]) .text-secondary {
  color: var(--text-secondary) !important;
}

/* ===== ADDITIONAL COMPREHENSIVE DARK MODE FIXES ===== */

/* FlashcardView - CardList Component */
html:is(.dark, [data-bs-theme="dark"]) .card-list-section {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-header {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-header h3 {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-header select {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-card {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-card:hover {
  background: var(--primary-soft) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-card-question,
html:is(.dark, [data-bs-theme="dark"]) .list-card-content p {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-card-meta {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-card-meta span {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-card-subject {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delete-modal,
html:is(.dark, [data-bs-theme="dark"]) .delete-modal-overlay .delete-modal {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delete-modal h4 {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delete-modal p {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delete-card-preview {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-cancel {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-cancel:hover {
  background: var(--border) !important;
}

/* FlashcardView - StatsGrid Component */
html:is(.dark, [data-bs-theme="dark"]) .stats-grid .stat-card:not(.primary) {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .stats-grid .stat-card:not(.primary) .stat-value {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .stats-grid .stat-card:not(.primary) .stat-label {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-secondary-action {
  background: transparent !important;
  border-color: var(--primary) !important;
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-secondary-action:hover {
  background: var(--primary-soft) !important;
}

/* AnalyticsView - Overview Cards with white backgrounds */
html:is(.dark, [data-bs-theme="dark"]) .overview-cards .overview-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .overview-card .overview-value {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .overview-card .overview-label {
  color: var(--text-secondary) !important;
}

/* AnalyticsView - Search filter and sort controls */
html:is(.dark, [data-bs-theme="dark"]) .search-filter {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-filter i {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-input {
  background: transparent !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-input::placeholder {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .sort-control select {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .trend-list-header {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .trend-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .trend-item:hover {
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .trend-title {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .trend-subject {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .trend-rank {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

/* AnalyticsView - Hot items list */
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover {
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hot-title {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hot-tag {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hot-rank {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hot-count {
  color: var(--text-secondary) !important;
}

/* AnalyticsView - Results table */
html:is(.dark, [data-bs-theme="dark"]) .rtbl-row {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .rtbl-row:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .rtbl-name,
html:is(.dark, [data-bs-theme="dark"]) .rtbl-accuracy,
html:is(.dark, [data-bs-theme="dark"]) .rtbl-date {
  color: var(--text-primary) !important;
}

/* AnalyticsView - Delta badges */
html:is(.dark, [data-bs-theme="dark"]) .delta-badge.up {
  background: var(--success-soft) !important;
  color: var(--success) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delta-badge.down {
  background: var(--destructive-soft) !important;
  color: var(--destructive) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delta-badge.neutral {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .delta-badge.new {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

/* EssayAnalysisView - Sidebar */
html:is(.dark, [data-bs-theme="dark"]) .sidebar {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .sidebar-header {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-item {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-item:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-item.active {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-item i {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-edit-btn {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .history-edit-btn:hover {
  background: var(--surface-muted) !important;
  color: var(--primary) !important;
}

/* EssayAnalysisView - Main content */
html:is(.dark, [data-bs-theme="dark"]) .main-content {
  background: var(--bg-page) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .chat-container {
  background: transparent !important;
}

html:is(.dark, [data-bs-theme="dark"]) .welcome-section h1 {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .welcome-subtitle {
  color: var(--text-secondary) !important;
}

/* EssayAnalysisView - Feature boxes */
html:is(.dark, [data-bs-theme="dark"]) .feature-box {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .feature-box:hover {
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .feature-box i {
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .feature-box span {
  color: var(--text-primary) !important;
}

/* EssayAnalysisView - Input area */
html:is(.dark, [data-bs-theme="dark"]) .input-area {
  background: linear-gradient(to top, var(--bg-page) 80%, transparent) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .input-container {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .input-container:focus-within {
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .input-container textarea {
  color: var(--text-primary) !important;
  background: transparent !important;
}

html:is(.dark, [data-bs-theme="dark"]) .input-container textarea::placeholder {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .input-hint {
  color: var(--text-secondary) !important;
}

/* EssayAnalysisView - Messages */
html:is(.dark, [data-bs-theme="dark"]) .message-row {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .message-sender {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .message-text {
  color: var(--text-primary) !important;
}

/* EssayAnalysisView - Error banner dark mode */
html:is(.dark, [data-bs-theme="dark"]) .error-banner {
  background: var(--destructive-soft) !important;
  border-color: var(--destructive) !important;
  color: var(--destructive) !important;
}

/* ExamEditView - Modals and overlays */
html:is(.dark, [data-bs-theme="dark"]) .saving-modal,
html:is(.dark, [data-bs-theme="dark"]) .auto-distribute-modal {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .saving-title,
html:is(.dark, [data-bs-theme="dark"]) .ad-modal-title {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .saving-subtitle,
html:is(.dark, [data-bs-theme="dark"]) .ad-modal-subtitle {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-modal-header,
html:is(.dark, [data-bs-theme="dark"]) .ad-modal-body,
html:is(.dark, [data-bs-theme="dark"]) .ad-modal-footer {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-input-wrapper {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-input {
  background: transparent !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-input-label {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-result-section {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-result-label {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-result-value {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-message {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-btn-secondary {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-close-btn {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .ad-close-btn:hover {
  color: var(--text-primary) !important;
}

/* General loading states */
html:is(.dark, [data-bs-theme="dark"]) .loading {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .empty {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .empty .hint {
  color: var(--text-secondary) !important;
}

/* Bootstrap modal overrides */
html:is(.dark, [data-bs-theme="dark"]) .modal-content {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .modal-header {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .modal-header .modal-title {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .modal-body {
  background: var(--surface) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .modal-footer {
  border-color: var(--border) !important;
}

/* Button close overrides */
html:is(.dark, [data-bs-theme="dark"]) .btn-close {
  filter: invert(1) !important;
}

/* Analytics header text */
html:is(.dark, [data-bs-theme="dark"]) .analytics-header h2 {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .header-subtitle {
  color: var(--text-secondary) !important;
}

/* Card hover effects */
html:is(.dark, [data-bs-theme="dark"]) .card-hover:hover {
  border-color: var(--primary) !important;
}

/* Pagination info and controls */
html:is(.dark, [data-bs-theme="dark"]) .pagination-info {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .page-info {
  color: var(--text-primary) !important;
}

/* Review header in flashcard view */
html:is(.dark, [data-bs-theme="dark"]) .review-header {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .progress-text {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .progress-bar {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-exit {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-exit:hover {
  background: var(--primary-soft) !important;
  border-color: var(--primary) !important;
  color: var(--primary) !important;
}

/* Overview icon backgrounds in dark mode */
html:is(.dark, [data-bs-theme="dark"]) .overview-icon.blue {
  background: var(--primary-soft) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .overview-icon.green {
  background: var(--success-soft) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .overview-icon.purple {
  background: rgba(124, 58, 237, 0.15) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .overview-icon.amber {
  background: rgba(217, 119, 6, 0.15) !important;
}

/* ===== EXAM FORM COMPONENT ===== */
html:is(.dark, [data-bs-theme="dark"]) .exam-form-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-form {
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-label {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-label svg {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-input,
html:is(.dark, [data-bs-theme="dark"]) .form-textarea {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-input::placeholder,
html:is(.dark, [data-bs-theme="dark"]) .form-textarea::placeholder {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-input:hover,
html:is(.dark, [data-bs-theme="dark"]) .form-textarea:hover {
  background: var(--surface) !important;
  border-color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-input:focus,
html:is(.dark, [data-bs-theme="dark"]) .form-textarea:focus {
  background: var(--surface) !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .form-error {
  background: var(--destructive-soft) !important;
  border-color: var(--destructive) !important;
  color: var(--destructive) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-cancel {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-cancel:hover {
  background: var(--border) !important;
  color: var(--text-primary) !important;
}

/* ===== PRACTICE VIEW EXAM LIST CARDS ===== */
html:is(.dark, [data-bs-theme="dark"]) .exam-item,
html:is(.dark, [data-bs-theme="dark"]) .content-section {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-item:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-name {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-meta {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .section-header h3 {
  color: var(--text-primary) !important;
}

/* Practice Mode Cards */
html:is(.dark, [data-bs-theme="dark"]) .mode-card,
html:is(.dark, [data-bs-theme="dark"]) .historical-card,
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-card,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card,
html:is(.dark, [data-bs-theme="dark"]) .bookmark-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .mode-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .historical-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .bookmark-card:hover {
  background: var(--surface-muted) !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .mode-title {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .mode-desc {
  color: var(--text-secondary) !important;
}

/* Question items in practice view */
html:is(.dark, [data-bs-theme="dark"]) .question-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-item:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-text {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-subject {
  color: var(--text-secondary) !important;
}

/* Tabs in practice view */
html:is(.dark, [data-bs-theme="dark"]) .tabs button {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .tabs button:hover {
  background: var(--surface) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .tabs button.active {
  background: var(--primary) !important;
  color: #fff !important;
  border-color: var(--primary) !important;
}

/* Option items in quiz */
html:is(.dark, [data-bs-theme="dark"]) .option-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .option-item:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .option-item.selected {
  background: var(--primary-soft) !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .option-label {
  color: var(--text-secondary) !important;
}

/* ===== QUESTION LIST COMPONENT ===== */
html:is(.dark, [data-bs-theme="dark"]) .content-container {
  background: var(--bg-page) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-list-wrapper {
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-item:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-item.selected {
  background: var(--primary-soft) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .subject-badge {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

/* ===== TOOLBAR BUTTONS ===== */
html:is(.dark, [data-bs-theme="dark"]) .toolbar-btn-secondary {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .toolbar-btn-secondary:hover {
  background: var(--surface) !important;
}

/* ===== USER EXAM VIEW CARDS ===== */
html:is(.dark, [data-bs-theme="dark"]) .exam-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-card:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-card-header {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .exam-card-footer {
  border-color: var(--border) !important;
}

/* Section containers */
html:is(.dark, [data-bs-theme="dark"]) .section-content,
html:is(.dark, [data-bs-theme="dark"]) .search-section {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* Empty and loading states */
html:is(.dark, [data-bs-theme="dark"]) .empty-search,
html:is(.dark, [data-bs-theme="dark"]) .loading-search {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-secondary) !important;
}

/* Badges */
html:is(.dark, [data-bs-theme="dark"]) .meta-badge {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .difficulty-badge.easy {
  background: var(--success-soft) !important;
  color: var(--success) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .difficulty-badge.medium {
  background: rgba(217, 119, 6, 0.15) !important;
  color: #ca8a04 !important;
}

html:is(.dark, [data-bs-theme="dark"]) .difficulty-badge.hard {
  background: var(--destructive-soft) !important;
  color: var(--destructive) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .tag-badge {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .bookmark-status {
  background: rgba(217, 119, 6, 0.15) !important;
  color: #ca8a04 !important;
}

html:is(.dark, [data-bs-theme="dark"]) .flashcard-status {
  background: var(--primary-soft) !important;
  color: var(--primary) !important;
}

/* Answer feedback */
html:is(.dark, [data-bs-theme="dark"]) .correct-msg {
  background: var(--success-soft) !important;
  color: var(--success) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .wrong-msg {
  background: var(--destructive-soft) !important;
  color: var(--destructive) !important;
}

/* btn-secondary */
html:is(.dark, [data-bs-theme="dark"]) .btn-secondary {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .btn-secondary:hover {
  background: var(--surface) !important;
}

/* ===== MOCK EXAM DIALOG ===== */
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-dialog,
html:is(.dark, [data-bs-theme="dark"]) .dialog-content {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .dialog-header {
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .dialog-header h3 {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .dialog-body {
  background: var(--surface) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .dialog-footer {
  border-color: var(--border) !important;
}

/* ===== ROUND 2 FIXES [2026-01-02] ===== */

/* 1. Chat Panel Header (Split View) */
html:is(.dark, [data-bs-theme="dark"]) .chat-panel-header {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .chat-panel-title {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .chat-icon {
  background: var(--surface-muted) !important;
  color: var(--primary) !important;
}

/* 2. Question View Meta Tags */
html:is(.dark, [data-bs-theme="dark"]) .question-meta .meta-tag {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .meta-tag.subject {
  background: rgba(37, 99, 235, 0.2) !important;
  /* Blue tint */
  color: #60a5fa !important;
}

html:is(.dark, [data-bs-theme="dark"]) .meta-tag.category {
  background: rgba(22, 163, 74, 0.2) !important;
  /* Green tint */
  color: #4ade80 !important;
}

html:is(.dark, [data-bs-theme="dark"]) .meta-tag.difficulty.easy {
  background: rgba(22, 163, 74, 0.2) !important;
  color: #4ade80 !important;
}

html:is(.dark, [data-bs-theme="dark"]) .meta-tag.difficulty.medium {
  background: rgba(217, 119, 6, 0.2) !important;
  /* Orange tint */
  color: #fbbf24 !important;
}

html:is(.dark, [data-bs-theme="dark"]) .meta-tag.difficulty.hard {
  background: rgba(220, 38, 38, 0.2) !important;
  /* Red tint */
  color: #f87171 !important;
}

/* 3. Analytics Header Font */
html:is(.dark, [data-bs-theme="dark"]) .analytics-header h2 {
  color: var(--text-primary) !important;
}

/* 4. Landing Page Stats Section */
html:is(.dark, [data-bs-theme="dark"]) .stats-section {
  background: var(--bg-page) !important;
  /* Blend with page bg */
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .stats-grid .stat-item {
  background: transparent !important;
}

html:is(.dark, [data-bs-theme="dark"]) .stats-grid .stat-label {
  color: var(--text-secondary) !important;
}

/* 5. Search Question Badges - Color Differentiation */
/* Targeting specific classes to override the generic span rule */
html:is(.dark, [data-bs-theme="dark"]) .search-question-badges .search-badge-status.bookmark-status {
  background: rgba(217, 119, 6, 0.2) !important;
  /* Yellow/Orange */
  color: #fbbf24 !important;
  border-color: rgba(217, 119, 6, 0.3) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-question-badges .search-badge-status.flashcard-status {
  background: rgba(67, 56, 202, 0.3) !important;
  /* Indigo/Blue */
  color: #818cf8 !important;
  /* Lighter indigo */
  border-color: rgba(67, 56, 202, 0.3) !important;
}

/* 6. Fix Navigation Arrows in Question Practice */
html:is(.dark, [data-bs-theme="dark"]) .arrow-btn,
html:is(.dark, [data-bs-theme="dark"]) .nav-btn {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .arrow-btn:hover:not(:disabled),
html:is(.dark, [data-bs-theme="dark"]) .nav-btn:hover {
  background: var(--primary) !important;
  color: #fff !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .nav-btn.active {
  background: var(--primary) !important;
  color: #fff !important;
  border-color: var(--primary) !important;
}

/* ===== ROUND 3 FIXES [2026-01-02] ===== */

/* 1. Mock Exam Overlay */
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-overlay {
  background: rgba(15, 23, 42, 0.85) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .mock-exam-content,
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* 2. AI Essay Welcome Section */
/* Removing blocky look and blending in */
html:is(.dark, [data-bs-theme="dark"]) .essay-analysis-view {
  background: var(--bg-soft) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .welcome-section {
  background: transparent !important;
}

html:is(.dark, [data-bs-theme="dark"]) .feature-box {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .feature-box:hover {
  background: var(--surface-muted) !important;
}

/* 3. Selection Toolbar & Flashcard Select All */
html:is(.dark, [data-bs-theme="dark"]) .selection-toolbar {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .toolbar-info {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .toolbar-text {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .toolbar-divider {
  background-color: var(--border) !important;
}

/* Fix for "squarely block frame" on buttons */
html:is(.dark, [data-bs-theme="dark"]) .toolbar-btn-secondary,
html:is(.dark, [data-bs-theme="dark"]) .action-btn-secondary {
  background: var(--surface-muted) !important;
  border: 1px solid var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .toolbar-btn-secondary:hover {
  background: var(--surface) !important;
}

/* 4. Question List Headers & Search Bars */
html:is(.dark, [data-bs-theme="dark"]) .list-header,
html:is(.dark, [data-bs-theme="dark"]) .view-mode-section,
html:is(.dark, [data-bs-theme="dark"]) .filter-panel-container,
html:is(.dark, [data-bs-theme="dark"]) .search-bar {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-control {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
}

/* Fix "select all" label container background if any */
html:is(.dark, [data-bs-theme="dark"]) .list-header-actions,
html:is(.dark, [data-bs-theme="dark"]) .select-all-label {
  background: transparent !important;
  color: var(--text-primary) !important;
}

/* 5. Analytics Header Visibility */
html:is(.dark, [data-bs-theme="dark"]) .analytics-header h2,
html:is(.dark, [data-bs-theme="dark"]) .analytics-title {
  color: var(--text-primary) !important;
  background: transparent !important;
  /* Ensure no white bg behind text */
}

/* 6. Admin Exam Edit View */
html:is(.dark, [data-bs-theme="dark"]) .exam-edit-view {
  background: var(--bg-page) !important;
}

/* 7. Input/Select Dark Mode General Fix */
html:is(.dark, [data-bs-theme="dark"]) input[type="text"],
html:is(.dark, [data-bs-theme="dark"]) input[type="search"],
html:is(.dark, [data-bs-theme="dark"]) textarea,
html:is(.dark, [data-bs-theme="dark"]) select {
  background: var(--surface-muted) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) input::placeholder,
html:is(.dark, [data-bs-theme="dark"]) textarea::placeholder {
  color: var(--text-secondary) !important;
}

/* ===== ROUND 4 FIXES [2026-01-02 22:00] ===== */

/* 1. List Header Actions (Select All Bar) */
html:is(.dark, [data-bs-theme="dark"]) .list-header-actions {
  background: var(--primary-soft) !important;
  color: var(--text-primary) !important;
  border-bottom: 1px solid var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .list-header-actions .select-all-label {
  color: var(--text-primary) !important;
}

/* 2. Admin Tag Management - White Table/Cards */
html:is(.dark, [data-bs-theme="dark"]) .tag-table,
html:is(.dark, [data-bs-theme="dark"]) .tag-admin .tag-table,
html:is(.dark, [data-bs-theme="dark"]) .tag-filters .filter-input {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .table-header {
  background: var(--surface-muted) !important;
  border-bottom: 1px solid var(--border) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .table-row {
  border-bottom: 1px solid var(--border) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .table-row:hover {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .count-badge {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

/* 3. Analytics Header - White Background Fix */
/* The user says "text still white in white bg". 
   If text is white (good), bg must be dark. */
html:is(.dark, [data-bs-theme="dark"]) .analytics-header {
  background-color: var(--bg-page) !important;
  /* Ensure it matches page */
}

/* Just in case the container has a bg color set inline or via specificity */
html:is(.dark, [data-bs-theme="dark"]) .analytics-view {
  background: var(--bg-page) !important;
}

/* 4. AI Essay Feature Grid - Margins/Gap */
html:is(.dark, [data-bs-theme="dark"]) .feature-grid {
  background: transparent !important;
}

html:is(.dark, [data-bs-theme="dark"]) .welcome-section {
  background: transparent !important;
}

/* 5. Question Header Input Fields (Start Exam) */
/* Image 2 shows "Question 1" and a white input box */
html:is(.dark, [data-bs-theme="dark"]) .question-header input,
html:is(.dark, [data-bs-theme="dark"]) .question-header .input-group-text,
html:is(.dark, [data-bs-theme="dark"]) .quiz-header input,
html:is(.dark, [data-bs-theme="dark"]) .quiz-tools input {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .question-header .btn-light {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

/* ===== ROUND 5 FIXES [2026-01-02 22:05] ===== */

/* 1. Analytics Badges (Hot Count & Rank Badges) */
/* Targeted fix for "X 1 ? badge being white */
html:is(.dark, [data-bs-theme="dark"]) .hot-count {
  background: var(--surface-muted) !important;
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .rank-badge.pass,
html:is(.dark, [data-bs-theme="dark"]) .rank-badge.fail {
  background: var(--surface-muted) !important;
  /* Keep colored text for semantics if desired, or override */
}

/* 2. Mock Exam Dialog Background & Warnings */
/* Dialog Body Background */
html:is(.dark, [data-bs-theme="dark"]) .mock-exam-dialog .dialog-body,
html:is(.dark, [data-bs-theme="dark"]) .modal-content .dialog-body {
  background: var(--surface) !important;
}

/* No Questions Warning (often pinkish in light mode) */
html:is(.dark, [data-bs-theme="dark"]) .no-questions-warning {
  background: rgba(220, 38, 38, 0.15) !important;
  color: #f87171 !important;
  border: 1px solid rgba(220, 38, 38, 0.3) !important;
}

/* Source Checkbox Container (the big white boxes) */
html:is(.dark, [data-bs-theme="dark"]) .source-checkbox {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .source-checkbox:hover {
  background: var(--surface-muted) !important;
  border-color: var(--primary) !important;
}

/* 3. Dialog Footer & Actions */
html:is(.dark, [data-bs-theme="dark"]) .dialog-footer {
  background: var(--surface) !important;
  border-top-color: var(--border) !important;
}

/* ===== ROUND 6 FIXES [2026-01-02 22:10] ===== */

/* 1. Mock Exam Dialog Header - Fix White Background & Hover */
html:is(.dark, [data-bs-theme="dark"]) .dialog-header {
  background: var(--surface) !important;
  border-bottom-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .dialog-header h3 {
  color: var(--text-primary) !important;
}

/* Ensure no weird hover effects on the header container itself */
html:is(.dark, [data-bs-theme="dark"]) .dialog-header:hover {
  background: var(--surface) !important;
}

/* 2. Analytics "Hot Tag" Super Long Frame */
/* The user reported a "super long square frame" around the tag.
   It might be a background color leaking or set explicitly. */
html:is(.dark, [data-bs-theme="dark"]) .hot-tag,
html:is(.dark, [data-bs-theme="dark"]) .hot-tag span {
  background: transparent !important;
  color: var(--text-secondary) !important;
  box-shadow: none !important;
}

/* Also fix the line-item container just in case */
html:is(.dark, [data-bs-theme="dark"]) .hot-item {
  border-bottom: 1px solid var(--border) !important;
}

/* ===== ROUND 7 FIXES [2026-01-02 22:15] ===== */

/* 1. Analytics Card Header - Remove Blocky/Square Look */
html:is(.dark, [data-bs-theme="dark"]) .analytics-card .card-header,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card .card-header,
html:is(.dark, [data-bs-theme="dark"]) .card-header {
  background: transparent !important;
  border-bottom: 1px solid var(--border) !important;
  color: var(--text-primary) !important;
  /* Remove any border-radius conflict if present */
  border-radius: 0 !important;
}

/* 2. Container/Div Fixes inside Cards */
/* The user says "those div in containers cmon" */
html:is(.dark, [data-bs-theme="dark"]) .card-title-row,
html:is(.dark, [data-bs-theme="dark"]) .card-controls {
  background: transparent !important;
}

/* 3. Card Header Hover Fix */
/* User says "hover will very ugly squarely cut" */
html:is(.dark, [data-bs-theme="dark"]) .card-header:hover {
  background: transparent !important;
  /* Disable hover bg change */
}

/* ===== ROUND 8 FIXES [2026-01-02 22:20] ===== */

/* 1. Header Hover - COMPLETE DISABLE */
html:is(.dark, [data-bs-theme="dark"]) .card-header:hover,
html:is(.dark, [data-bs-theme="dark"]) .analytics-card .card-header:hover,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card .card-header:hover {
  background: transparent !important;
  cursor: default !important;
  /* Remove pointer cursor if it implies clickability */
}

/* 2. Hot Tag - "No BG" Advice */
/* User requested no bg or advice. Clean text look is best here to avoid "frames". */
html:is(.dark, [data-bs-theme="dark"]) .hot-tag {
  background: transparent !important;
  color: var(--text-secondary) !important;
  padding: 0 !important;
  /* Remove padding to avoid "box" shape */
  border: none !important;
  font-weight: 500 !important;
}

/* 3. Hot Item Row Hover */
/* Ensure the ROW hovers nicely, but not the TAG */
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover {
  background: var(--surface-muted) !important;
}

/* ===== ROUND 9 FIXES [2026-01-02 22:25] ===== */

/* 1. Analytics & Wrong Card - REMOVE Item/Row Hover Backgrounds entirely */
/* User dislikes the "flash weird" or blocky hover effects on these lists */
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .analytics-card .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .results-table-row:hover {
  background: transparent !important;
  /* Optional: keep cursor pointer if clickable, but no bg change */
}

/* 2. Practice Page Exam List - Remove Hover Background */
/* "exam-info same the hover inner div so long and flash it weird" */
html:is(.dark, [data-bs-theme="dark"]) .exam-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-info:hover {
  background: transparent !important;
}

/* 3. General "No Hover Flash" for these lists */
/* If there are any other specific hover states causing issues in these lists */
html:is(.dark, [data-bs-theme="dark"]) .list-item:hover {
  background: transparent !important;
}

/* ===== ROUND 10 FIXES [2026-01-02 22:30] ===== */

/* 1. AGGRESSIVE Hover Removal */
/* User says "are u dumb still have hover effect" */
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .wrong-card .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .analytics-card .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .results-table-row:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .question-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .hot-item:active,
html:is(.dark, [data-bs-theme="dark"]) .hot-item:focus {
  background: transparent !important;
  background-color: transparent !important;
  transform: none !important;
  box-shadow: none !important;
  border-color: var(--border) !important;
}

/* 2. Hot Tag "Long Ass" Frame Removal */
/* User sees a background on the tag container itself. */
html:is(.dark, [data-bs-theme="dark"]) .hot-tag,
html:is(.dark, [data-bs-theme="dark"]) .hot-info,
html:is(.dark, [data-bs-theme="dark"]) .hot-title {
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
  border: none !important;
  display: inline-flex !important;
  /* Ensure it doesn't span full width if block */
  width: auto !important;
}

/* 3. Exam Info "Inner Div" Hover */
html:is(.dark, [data-bs-theme="dark"]) .exam-info,
html:is(.dark, [data-bs-theme="dark"]) .exam-info:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-item .exam-info {
  background: transparent !important;
  background-color: transparent !important;
}

/* ===== ROUND 11 FIXES [2026-01-02 22:35] ===== */

/* 1. NUCLEAR OPTION - Background Cleaning */
/* Remove ANY background from inner divs of hot-item and exam-item */
html:is(.dark, [data-bs-theme="dark"]) .hot-item *,
html:is(.dark, [data-bs-theme="dark"]) .exam-item *,
html:is(.dark, [data-bs-theme="dark"]) .hot-item>div,
html:is(.dark, [data-bs-theme="dark"]) .exam-item>div,
html:is(.dark, [data-bs-theme="dark"]) .hot-info,
html:is(.dark, [data-bs-theme="dark"]) .hot-tag,
html:is(.dark, [data-bs-theme="dark"]) .hot-title,
html:is(.dark, [data-bs-theme="dark"]) .exam-info,
html:is(.dark, [data-bs-theme="dark"]) .exam-name,
html:is(.dark, [data-bs-theme="dark"]) .exam-meta {
  background: transparent !important;
  background-color: transparent !important;
}

/* 2. Fix the "Strip" - Specific targeting */
/* Use specificity to override any component styles */
html:is(.dark, [data-bs-theme="dark"]) .hot-tag span,
html:is(.dark, [data-bs-theme="dark"]) .hot-info span {
  background: transparent !important;
}

/* 3. Re-affirm Hover Disable */
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-item:hover {
  background: var(--surface) !important;
  /* Keep it static surface color */
  transform: none !important;
  box-shadow: none !important;
  border-color: var(--border) !important;
}

/* 4. Fix Practice Exam "Flash" */
html:is(.dark, [data-bs-theme="dark"]) .exam-item {
  background: var(--surface) !important;
  border-color: var(--border) !important;
}

/* ===== ROUND 12 FIXES [2026-01-02 22:45] - HIGH SPECIFICITY ===== */

/* 1. Analytics Hot List - Scorched Earth */
html:is(.dark, [data-bs-theme="dark"]) .analytics-view .hot-list .hot-item,
html:is(.dark, [data-bs-theme="dark"]) .analytics-view .hot-list .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item,
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item:hover {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  transform: none !important;
  box-shadow: none !important;
  transition: none !important;
  /* Stop flashing */
}

/* 2. Hot Tag & Info - Force Transparency on Children */
html:is(.dark, [data-bs-theme="dark"]) .analytics-view .hot-list .hot-item *,
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item * {
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
}

/* 3. Hot Tag - Force Fit Content */
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item .hot-info .hot-tag,
html:is(.dark, [data-bs-theme="dark"]) .hot-tag {
  background: transparent !important;
  width: auto !important;
  display: inline-flex !important;
  border: none !important;
}

/* 4. Practice Exam List - Scorched Earth */
html:is(.dark, [data-bs-theme="dark"]) .split-view-container .exam-list .exam-item,
html:is(.dark, [data-bs-theme="dark"]) .split-view-container .exam-list .exam-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .exam-list .exam-item,
html:is(.dark, [data-bs-theme="dark"]) .exam-list .exam-item:hover {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  transform: none !important;
  box-shadow: none !important;
  transition: none !important;
}

/* 5. Exam Info - Force Transparency on Children */
html:is(.dark, [data-bs-theme="dark"]) .split-view-container .exam-list .exam-item *,
html:is(.dark, [data-bs-theme="dark"]) .exam-list .exam-item * {
  background: transparent !important;
  background-color: transparent !important;
}

/* 6. General Safety Net for Lists */
html:is(.dark, [data-bs-theme="dark"]) .list-item:hover {
  background: transparent !important;
}

/* ===== ROUND 13 FIXES [2026-01-03 15:35] ===== */

/* 1. Analytics & Wrong Card - Specific Hover Disable */
/* The user reported that .analytics-card.wrong-card still has a hover effect.
   We need to target this specific combination to neutralize the .wrong-card:hover rule. */
html:is(.dark, [data-bs-theme="dark"]) .analytics-card.wrong-card:hover,
html:is(.dark, [data-bs-theme="dark"]) .analytics-card.wrong-card {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  transform: none !important;
  box-shadow: none !important;
  cursor: default !important;
}

/* ===== ROUND 14 FIXES [2026-01-03 15:40] - RESTORE LIST HOVER ===== */

/* 1. Restore Hover for Practice Question List (Cohesive Style) */
/* User wants the hover back, but "same color effect" like flashcards.
   We override the previous transparency rules for this specific class. */
html:is(.dark, [data-bs-theme="dark"]) .search-question-item {
  transition: background-color 0.2s ease !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-question-item:hover {
  background: var(--surface-muted) !important;
  /* Smooth dark hover */
  border-color: var(--border) !important;
}

/* 2. Force Inner Content Transparency */
/* This is KEY: Ensure the inner div doesn't block the parent's hover color */
html:is(.dark, [data-bs-theme="dark"]) .search-question-item .search-question-content,
html:is(.dark, [data-bs-theme="dark"]) .search-question-item:hover .search-question-content,
html:is(.dark, [data-bs-theme="dark"]) .search-question-item .search-question-info,
html:is(.dark, [data-bs-theme="dark"]) .search-question-item:hover .search-question-info {
  background: transparent !important;
  background-color: transparent !important;
}

/* 3. Selected State Consistency */
html:is(.dark, [data-bs-theme="dark"]) .search-question-item.selected {
  background: var(--primary-soft) !important;
  border-color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .search-question-item.selected:hover {
  background: var(--primary-soft) !important;
  /* Keep selected color on hover */
}

/* ===== ROUND 15 FIXES [2026-01-03 15:45] - UNIFY ANALYTICS LIST HOVER ===== */

/* 1. Restore & Unify Hover for Analytics Lists */
/* User wants 'trend-item', 'results-table-row', and 'hot-item' to all share the same hover style.
   We override the previous "scorched earth" no-hover rules for these specific classes. */
html:is(.dark, [data-bs-theme="dark"]) .trend-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .results-table-row:hover,
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover {
  background: var(--surface-muted) !important;
  border-color: var(--primary) !important;
  transform: translateX(4px) !important;
  /* Restore the subtle shift */
  transition: all 0.2s ease !important;
  cursor: pointer !important;
}

/* 2. Ensure Inner Content Transparency */
/* This prevents "blocky" artifacts during hover. */
html:is(.dark, [data-bs-theme="dark"]) .trend-item *,
html:is(.dark, [data-bs-theme="dark"]) .trend-item:hover *,
html:is(.dark, [data-bs-theme="dark"]) .results-table-row *,
html:is(.dark, [data-bs-theme="dark"]) .results-table-row:hover *,
html:is(.dark, [data-bs-theme="dark"]) .hot-item *,
html:is(.dark, [data-bs-theme="dark"]) .hot-item:hover * {
  background: transparent !important;
  background-color: transparent !important;
}



/* Re-apply badge backgrounds just to be safe they aren't wiped by the * rule above */
html:is(.dark, [data-bs-theme="dark"]) .hot-count {
  background: #fef2f2 !important;
  /* Default red light */
  color: #dc2626 !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hot-rank {
  background: var(--primary-soft) !important;
}

/* ===== ROUND 17 FIXES [2026-01-03 15:50] - SPECIFICITY FIX ===== */

/* 1. Force Hot Item Hover (Override Scorched Earth) */
/* Round 12 used very high specificity to kill the hover. We must match or beat it to restore it. 
   Selector: html:is(.dark, [data-bs-theme="dark"]) .analytics-view .hot-list .hot-item:hover */
html:is(.dark, [data-bs-theme="dark"]) .analytics-view .hot-list .hot-item:hover,
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item:hover {
  background: var(--surface-muted) !important;
  border-color: var(--primary) !important;
  transform: translateX(4px) !important;
  transition: all 0.2s ease !important;
  cursor: pointer !important;
}

/* 2. Re-assert inner transparency for this specific chain */
html:is(.dark, [data-bs-theme="dark"]) .analytics-view .hot-list .hot-item:hover *,
html:is(.dark, [data-bs-theme="dark"]) .hot-list .hot-item:hover * {
  background: transparent !important;
}

/* ===== ROUND 18 FIXES [2026-01-03 16:45] - LANDING PAGE HERO ===== */

/* 1. Hero Section Dark Mode */
html:is(.dark, [data-bs-theme="dark"]) .hero-section {
  background: linear-gradient(180deg, var(--bg-page) 0%, var(--surface) 100%) !important;
}

html:is(.dark, [data-bs-theme="dark"]) .hero-badge {
  background: rgba(59, 130, 246, 0.2) !important;
}
/* ===== LOGIN MODAL DARK MODE ===== */
html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .modal-content {
  background: var(--surface) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .modal-header {
  border-bottom: 1px solid var(--border) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .modal-header h2 {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .btn-close {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .btn-close:hover {
  background: var(--surface-muted) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .auth-tabs {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .tab-btn {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .tab-btn:hover {
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .tab-btn.active {
  background: var(--surface) !important;
  color: var(--primary) !important;
  box-shadow: var(--shadow) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .error-message {
  background: var(--destructive-soft) !important;
  color: var(--destructive) !important;
  border-left-color: var(--destructive) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .success-message {
  background: var(--success-soft) !important;
  color: var(--success) !important;
  border-left-color: var(--success) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .form-group label {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .form-input {
  background: var(--surface) !important;
  border-color: var(--border) !important;
  color: var(--text-primary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .form-input:focus {
  border-color: var(--primary) !important;
  box-shadow: 0 0 0 3px rgba(var(--bs-primary-rgb), 0.25) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .form-input:disabled {
  background: var(--surface-muted) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .form-hint,
html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .switch-hint {
  color: var(--text-secondary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .switch-hint .switch-link {
  color: var(--primary) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .btn-primary {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%) !important;
  color: #fff !important;
  box-shadow: 0 4px 12px rgba(var(--bs-primary-rgb), 0.3) !important;
}

html:is(.dark, [data-bs-theme=\"dark\"]) .modal-overlay .btn-primary:hover:not(:disabled) {
  box-shadow: 0 6px 16px rgba(var(--bs-primary-rgb), 0.4) !important;
}